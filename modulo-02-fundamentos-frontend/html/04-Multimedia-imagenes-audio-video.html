<!DOCTYPE html>
<html lang="es">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>04 - Multimedia: Imágenes, Audio y Video</title>
    <style>
      * {
        margin: 0;
        padding: 0;
        box-sizing: border-box;
      }

      body {
        font-family: "Segoe UI", Tahoma, Geneva, Verdana, sans-serif;
        line-height: 1.6;
        color: #333;
        background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
        padding: 20px;
      }

      .container {
        max-width: 1200px;
        margin: 0 auto;
        background: white;
        border-radius: 20px;
        box-shadow: 0 20px 60px rgba(0, 0, 0, 0.3);
        overflow: hidden;
      }

      header {
        background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
        color: white;
        padding: 40px 20px;
        text-align: center;
      }

      header h1 {
        font-size: 2.5rem;
        margin-bottom: 10px;
      }

      header p {
        font-size: 1.1rem;
        opacity: 0.9;
      }

      main {
        padding: 40px 20px;
      }

      section {
        margin-bottom: 50px;
      }

      h2 {
        color: #667eea;
        font-size: 2rem;
        margin-bottom: 20px;
        padding-bottom: 10px;
        border-bottom: 3px solid #667eea;
      }

      h3 {
        color: #764ba2;
        font-size: 1.5rem;
        margin: 30px 0 15px 0;
      }

      p {
        margin-bottom: 15px;
        color: #555;
      }

      /* Estilos para imágenes */
      .image-grid {
        display: grid;
        grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
        gap: 20px;
        margin-top: 20px;
      }

      .image-card {
        background: #f8f9fa;
        border-radius: 10px;
        overflow: hidden;
        box-shadow: 0 5px 15px rgba(0, 0, 0, 0.1);
        transition: transform 0.3s ease;
      }

      .image-card:hover {
        transform: translateY(-5px);
      }

      .image-card img {
        width: 100%;
        height: 250px;
        object-fit: cover;
        display: block;
      }

      .image-card-content {
        padding: 15px;
      }

      .image-card-content h4 {
        color: #333;
        margin-bottom: 10px;
      }

      /* Placeholder para lazy loading */
      .img-placeholder {
        background: linear-gradient(
          90deg,
          #f0f0f0 25%,
          #e8e8e8 50%,
          #f0f0f0 75%
        );
        background-size: 200% 100%;
        animation: shimmer 1.5s infinite;
        height: 250px;
      }

      @keyframes shimmer {
        0% {
          background-position: -200% 0;
        }
        100% {
          background-position: 200% 0;
        }
      }

      img.loaded {
        opacity: 1;
        transition: opacity 0.3s ease-in;
      }

      img.lazy {
        opacity: 0;
      }

      /* Estilos para audio */
      .audio-container {
        background: linear-gradient(135deg, #f093fb 0%, #f5576c 100%);
        padding: 30px;
        border-radius: 15px;
        margin-top: 20px;
      }

      .audio-container audio {
        width: 100%;
        margin-top: 15px;
      }

      .audio-info {
        color: white;
        margin-bottom: 10px;
      }

      .audio-info h4 {
        font-size: 1.3rem;
        margin-bottom: 5px;
      }

      /* Estilos para video */
      .video-container {
        background: #000;
        border-radius: 15px;
        overflow: hidden;
        margin-top: 20px;
      }

      .video-container video {
        width: 100%;
        display: block;
      }

      .video-controls {
        background: #222;
        padding: 15px;
        display: flex;
        gap: 10px;
        flex-wrap: wrap;
      }

      .btn {
        background: #667eea;
        color: white;
        border: none;
        padding: 10px 20px;
        border-radius: 5px;
        cursor: pointer;
        font-size: 1rem;
        transition: background 0.3s ease;
      }

      .btn:hover {
        background: #5568d3;
      }

      .btn:active {
        transform: scale(0.98);
      }

      /* Estilos para webcam */
      .webcam-container {
        background: #f8f9fa;
        padding: 30px;
        border-radius: 15px;
        text-align: center;
        margin-top: 20px;
      }

      .webcam-container video {
        max-width: 100%;
        border-radius: 10px;
        box-shadow: 0 5px 20px rgba(0, 0, 0, 0.2);
        margin-top: 20px;
      }

      /* Picture element demo */
      .picture-demo {
        margin-top: 20px;
        text-align: center;
      }

      .picture-demo picture {
        display: inline-block;
      }

      .picture-demo img {
        max-width: 100%;
        height: auto;
        border-radius: 10px;
        box-shadow: 0 10px 30px rgba(0, 0, 0, 0.2);
      }

      /* Footer */
      footer {
        background: #333;
        color: white;
        text-align: center;
        padding: 20px;
        margin-top: 40px;
      }

      /* Responsive */
      @media (max-width: 768px) {
        header h1 {
          font-size: 2rem;
        }

        h2 {
          font-size: 1.5rem;
        }

        .image-grid {
          grid-template-columns: 1fr;
        }
      }

      .code-info {
        background: #f8f9fa;
        border-left: 4px solid #667eea;
        padding: 15px;
        margin: 20px 0;
        border-radius: 5px;
      }

      .code-info code {
        background: #e9ecef;
        padding: 2px 6px;
        border-radius: 3px;
        font-family: "Courier New", monospace;
      }
    </style>
  </head>
  <body>
    <div class="container">
      <header>
        <h1>🎨 Multimedia HTML5</h1>
        <p>Imágenes, Audio y Video - Ejemplos Prácticos</p>
      </header>

      <main>
        <!-- SECCIÓN 1: IMÁGENES -->
        <section id="imagenes">
          <h2>📷 1. Imágenes</h2>

          <h3>1.1. Imagen básica con alt</h3>
          <div class="code-info">
            <p>
              <strong>Código:</strong>
              <code
                >&lt;img src="..." alt="Descripción" width="600"
                height="400"&gt;</code
              >
            </p>
            <p>Siempre incluir atributo <code>alt</code> para accesibilidad.</p>
          </div>
          <img
            src="https://picsum.photos/600/400?random=1"
            alt="Imagen de ejemplo generada aleatoriamente"
            width="600"
            height="400"
            style="
              max-width: 100%;
              height: auto;
              border-radius: 10px;
              box-shadow: 0 5px 15px rgba(0, 0, 0, 0.1);
            "
          />

          <h3>1.2. Imágenes responsivas con srcset</h3>
          <div class="code-info">
            <p>
              <strong>srcset</strong> permite ofrecer diferentes tamaños según
              el dispositivo.
            </p>
            <p>
              <code
                >srcset="imagen-400.jpg 400w, imagen-800.jpg 800w,
                imagen-1200.jpg 1200w"</code
              >
            </p>
          </div>
          <img
            src="https://picsum.photos/800/600?random=2"
            srcset="
              https://picsum.photos/400/300?random=2   400w,
              https://picsum.photos/800/600?random=2   800w,
              https://picsum.photos/1200/900?random=2 1200w
            "
            sizes="(max-width: 600px) 100vw, 800px"
            alt="Imagen responsiva con srcset"
            loading="lazy"
            style="
              max-width: 100%;
              height: auto;
              border-radius: 10px;
              box-shadow: 0 5px 15px rgba(0, 0, 0, 0.1);
              margin-top: 15px;
            "
          />

          <h3>1.3. Elemento &lt;picture&gt; para formatos modernos</h3>
          <div class="code-info">
            <p>
              <strong>&lt;picture&gt;</strong> permite servir diferentes
              formatos (WebP, AVIF) con fallback.
            </p>
          </div>
          <div class="picture-demo">
            <picture>
              <!-- El navegador elegirá el primer formato que soporte -->
              <source
                srcset="https://picsum.photos/800/500?random=3"
                type="image/webp"
              />
              <img
                src="https://picsum.photos/800/500?random=3"
                alt="Ejemplo con picture element"
                loading="lazy"
              />
            </picture>
          </div>

          <h3>1.4. Galería con lazy loading</h3>
          <div class="code-info">
            <p>
              <strong>loading="lazy"</strong> retrasa la carga de imágenes hasta
              que estén cerca del viewport.
            </p>
          </div>
          <div class="image-grid">
            <div class="image-card">
              <img
                src="https://picsum.photos/400/300?random=4"
                alt="Paisaje 1"
                loading="lazy"
              />
              <div class="image-card-content">
                <h4>Paisaje Natural</h4>
                <p>Imagen con lazy loading automático</p>
              </div>
            </div>
            <div class="image-card">
              <img
                src="https://picsum.photos/400/300?random=5"
                alt="Paisaje 2"
                loading="lazy"
              />
              <div class="image-card-content">
                <h4>Arquitectura</h4>
                <p>Se carga cuando es visible</p>
              </div>
            </div>
            <div class="image-card">
              <img
                src="https://picsum.photos/400/300?random=6"
                alt="Paisaje 3"
                loading="lazy"
              />
              <div class="image-card-content">
                <h4>Naturaleza</h4>
                <p>Optimización de rendimiento</p>
              </div>
            </div>
          </div>
        </section>

        <!-- SECCIÓN 2: AUDIO -->
        <section id="audio">
          <h2>🎵 2. Audio</h2>

          <h3>2.1. Reproductor de audio básico</h3>
          <div class="code-info">
            <p>
              <strong>&lt;audio&gt;</strong> con controles nativos del
              navegador.
            </p>
            <p>
              Usa <code>controls</code>, <code>preload</code>,
              <code>loop</code> según necesites.
            </p>
          </div>
          <div class="audio-container">
            <div class="audio-info">
              <h4>🎼 Pista de Ejemplo</h4>
              <p>Audio de demostración con controles HTML5</p>
            </div>
            <audio controls preload="metadata">
              <source
                src="https://www.soundhelix.com/examples/mp3/SoundHelix-Song-1.mp3"
                type="audio/mpeg"
              />
              Tu navegador no soporta el elemento de audio.
            </audio>
          </div>

          <h3>2.2. Control de audio con JavaScript</h3>
          <div class="code-info">
            <p>
              Puedes controlar reproducción, volumen, tiempo, etc. con
              JavaScript.
            </p>
          </div>
          <div class="audio-container">
            <div class="audio-info">
              <h4>🎧 Control Personalizado</h4>
            </div>
            <audio id="miAudio" preload="metadata">
              <source
                src="https://www.soundhelix.com/examples/mp3/SoundHelix-Song-2.mp3"
                type="audio/mpeg"
              />
            </audio>
            <div
              style="
                margin-top: 15px;
                display: flex;
                gap: 10px;
                flex-wrap: wrap;
              "
            >
              <button
                class="btn"
                onclick="document.getElementById('miAudio').play()"
              >
                ▶️ Play
              </button>
              <button
                class="btn"
                onclick="document.getElementById('miAudio').pause()"
              >
                ⏸️ Pause
              </button>
              <button
                class="btn"
                onclick="document.getElementById('miAudio').currentTime = 0"
              >
                ⏮️ Reiniciar
              </button>
              <button class="btn" onclick="toggleMute()">🔇 Mute/Unmute</button>
            </div>
          </div>
        </section>

        <!-- SECCIÓN 3: VIDEO -->
        <section id="video">
          <h2>🎬 3. Video</h2>

          <h3>3.1. Video con controles nativos</h3>
          <div class="code-info">
            <p>
              <strong>&lt;video&gt;</strong> soporta múltiples formatos. Incluye
              <code>poster</code> para imagen previa.
            </p>
          </div>
          <div class="video-container">
            <video
              controls
              poster="https://picsum.photos/800/450?random=10"
              preload="metadata"
              width="100%"
            >
              <source
                src="https://commondatastorage.googleapis.com/gtv-videos-bucket/sample/BigBuckBunny.mp4"
                type="video/mp4"
              />
              Tu navegador no soporta el elemento de video.
            </video>
          </div>

          <h3>3.2. Video con controles personalizados</h3>
          <div class="code-info">
            <p>
              Crea tus propios controles usando JavaScript para personalizar la
              experiencia.
            </p>
          </div>
          <div class="video-container">
            <video
              id="miVideo"
              poster="https://picsum.photos/800/450?random=11"
              preload="metadata"
              width="100%"
            >
              <source
                src="https://commondatastorage.googleapis.com/gtv-videos-bucket/sample/ElephantsDream.mp4"
                type="video/mp4"
              />
            </video>
            <div class="video-controls">
              <button
                class="btn"
                onclick="document.getElementById('miVideo').play()"
              >
                ▶️ Play
              </button>
              <button
                class="btn"
                onclick="document.getElementById('miVideo').pause()"
              >
                ⏸️ Pause
              </button>
              <button
                class="btn"
                onclick="document.getElementById('miVideo').currentTime = 0"
              >
                ⏮️ Inicio
              </button>
              <button class="btn" onclick="toggleVideoMute()">🔇 Mute</button>
              <button class="btn" onclick="toggleFullscreen()">
                ⛶ Pantalla Completa
              </button>
            </div>
          </div>

          <h3>3.3. Video con subtítulos (track)</h3>
          <div class="code-info">
            <p>
              Usa <code>&lt;track&gt;</code> para agregar subtítulos en formato
              WebVTT (.vtt)
            </p>
            <p>
              Ejemplo:
              <code
                >&lt;track kind="captions" srclang="es" src="subs.vtt"&gt;</code
              >
            </p>
          </div>
          <div class="video-container" style="margin-top: 20px">
            <video controls width="100%">
              <source
                src="https://commondatastorage.googleapis.com/gtv-videos-bucket/sample/ForBiggerBlazes.mp4"
                type="video/mp4"
              />
              <!-- En producción, aquí irían archivos .vtt reales -->
              <track kind="captions" srclang="es" label="Español" default />
            </video>
          </div>
        </section>

        <!-- SECCIÓN 4: WEBCAM -->
        <section id="webcam">
          <h2>📹 4. Acceso a Cámara Web (getUserMedia)</h2>
          <div class="code-info">
            <p>
              <strong>navigator.mediaDevices.getUserMedia()</strong> permite
              acceder a cámara y micrófono.
            </p>
            <p>Requiere HTTPS en producción y permisos del usuario.</p>
          </div>
          <div class="webcam-container">
            <h3>Captura de Video en Vivo</h3>
            <button class="btn" onclick="iniciarCamara()">
              📷 Iniciar Cámara
            </button>
            <button class="btn" onclick="detenerCamara()">
              🛑 Detener Cámara
            </button>
            <br />
            <video
              id="webcam"
              autoplay
              playsinline
              width="640"
              height="480"
              style="display: none"
            ></video>
            <p id="webcamStatus" style="margin-top: 15px; color: #666">
              Presiona "Iniciar Cámara" para comenzar
            </p>
          </div>
        </section>

        <!-- SECCIÓN 5: BUENAS PRÁCTICAS -->
        <section id="buenas-practicas">
          <h2>✅ 5. Buenas Prácticas</h2>
          <div style="background: #f8f9fa; padding: 30px; border-radius: 10px">
            <h3>📸 Imágenes</h3>
            <ul style="line-height: 2">
              <li>✓ Siempre usar atributo <code>alt</code> descriptivo</li>
              <li>
                ✓ Especificar <code>width</code> y <code>height</code> para
                evitar reflow
              </li>
              <li>
                ✓ Usar <code>loading="lazy"</code> para imágenes below the fold
              </li>
              <li>
                ✓ Implementar <code>srcset</code> para imágenes responsivas
              </li>
              <li>✓ Usar formatos modernos (WebP, AVIF) con fallback</li>
              <li>✓ Optimizar tamaño y calidad de imágenes</li>
              <li>✓ Servir desde CDN cuando sea posible</li>
            </ul>

            <h3 style="margin-top: 30px">🎵 Audio</h3>
            <ul style="line-height: 2">
              <li>✓ Incluir controles con <code>controls</code></li>
              <li>✓ Proporcionar múltiples formatos (MP3, OGG, WAV)</li>
              <li>
                ✓ Usar <code>preload="metadata"</code> para mejor rendimiento
              </li>
              <li>✓ Incluir transcripciones para accesibilidad</li>
              <li>✓ Evitar <code>autoplay</code> sin <code>muted</code></li>
            </ul>

            <h3 style="margin-top: 30px">🎬 Video</h3>
            <ul style="line-height: 2">
              <li>✓ Usar <code>poster</code> para imagen previa</li>
              <li>✓ Incluir múltiples formatos (MP4, WebM)</li>
              <li>✓ Agregar subtítulos con <code>&lt;track&gt;</code></li>
              <li>✓ Usar <code>playsinline</code> en dispositivos móviles</li>
              <li>✓ Optimizar bitrate y resolución</li>
              <li>
                ✓ Considerar streaming adaptativo (HLS/DASH) para videos largos
              </li>
              <li>✓ Proporcionar controles accesibles por teclado</li>
            </ul>
          </div>
        </section>
      </main>

      <footer>
        <p>📚 Módulo 2 - Fundamentos Frontend | Multimedia HTML5</p>
        <p style="font-size: 0.9rem; opacity: 0.8; margin-top: 10px">
          Curso de Desarrollo Frontend 2025 |
          <a
            href="../recursos/04-notas-multimedia-imagenes-audio-video.md"
            style="color: #667eea"
            >Ver Notas Completas</a
          >
        </p>
      </footer>
    </div>

    <script>
      // Control de audio personalizado
      function toggleMute() {
        const audio = document.getElementById("miAudio");
        audio.muted = !audio.muted;
      }

      // Control de video personalizado
      function toggleVideoMute() {
        const video = document.getElementById("miVideo");
        video.muted = !video.muted;
      }

      function toggleFullscreen() {
        const video = document.getElementById("miVideo");
        if (video.requestFullscreen) {
          video.requestFullscreen();
        } else if (video.webkitRequestFullscreen) {
          video.webkitRequestFullscreen();
        } else if (video.msRequestFullscreen) {
          video.msRequestFullscreen();
        }
      }

      // Webcam: getUserMedia
      let stream = null;

      async function iniciarCamara() {
        const video = document.getElementById("webcam");
        const status = document.getElementById("webcamStatus");

        try {
          stream = await navigator.mediaDevices.getUserMedia({
            video: true,
            audio: false,
          });
          video.srcObject = stream;
          video.style.display = "block";
          status.textContent = "✅ Cámara activa";
          status.style.color = "#28a745";
        } catch (error) {
          console.error("Error al acceder a la cámara:", error);
          status.textContent =
            "❌ Error: No se pudo acceder a la cámara. " + error.message;
          status.style.color = "#dc3545";
        }
      }

      function detenerCamara() {
        const video = document.getElementById("webcam");
        const status = document.getElementById("webcamStatus");

        if (stream) {
          stream.getTracks().forEach((track) => track.stop());
          video.srcObject = null;
          video.style.display = "none";
          status.textContent = "⏹️ Cámara detenida";
          status.style.color = "#666";
          stream = null;
        }
      }

      // Lazy loading con IntersectionObserver (ejemplo avanzado)
      document.addEventListener("DOMContentLoaded", function () {
        const lazyImages = document.querySelectorAll("img.lazy");

        if ("IntersectionObserver" in window) {
          const imageObserver = new IntersectionObserver(
            (entries, observer) => {
              entries.forEach((entry) => {
                if (entry.isIntersecting) {
                  const img = entry.target;
                  img.src = img.dataset.src;
                  img.classList.remove("lazy");
                  img.classList.add("loaded");
                  observer.unobserve(img);
                }
              });
            }
          );

          lazyImages.forEach((img) => imageObserver.observe(img));
        } else {
          // Fallback para navegadores sin IntersectionObserver
          lazyImages.forEach((img) => {
            img.src = img.dataset.src;
            img.classList.add("loaded");
          });
        }
      });
    </script>
  </body>
</html>
